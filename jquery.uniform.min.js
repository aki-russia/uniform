(function(b){b.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:true,idPrefix:"uniform",resetSelector:false,autoHide:true},elements:[]};var d={APPLIED:0,DISABLED:1};var h={BUTTON:"0",SELECT:"1",CHECKBOX:"2",RADIO:"3",FILE:"4",INPUT:"5",TEXTAREA:"6"};if(b.browser.msie&&b.browser.version<7){b.support.selectOpacity=false}else{b.support.selectOpacity=true}var a=b.uniform.options;var c={};c[h.BUTTON]=function(l){var j=b(l);var m=b("<div>"),k=b("<span>");m.addClass(a.buttonClass);if(a.useID&&j.attr("id")!=""){m.attr("id",a.idPrefix+"-"+j.attr("id"))}var n;if(j.is("a, button")){n=j.text()}else{if(j.is(":submit, :reset, input[type=button]")){n=j.attr("value")}}n=n==""?j.is(":reset")?"Reset":"Submit":n;k.html(n);j.css("opacity",0);j.wrap(m);j.wrap(k);m=j.closest("div");k=j.closest("span");if(j.is(":disabled")){m.addClass(a.disabledClass)}m.bind({"mouseenter.uniform":function(){m.addClass(a.hoverClass)},"mouseleave.uniform":function(){m.removeClass(a.hoverClass);m.removeClass(a.activeClass)},"mousedown.uniform touchbegin.uniform":function(){m.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){m.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(p){if(b(p.target).is("span")||b(p.target).is("div")){if(l[0].dispatchEvent){var o=document.createEvent("MouseEvents");o.initEvent("click",true,true);l[0].dispatchEvent(o)}else{l[0].click()}}}});l.bind({"focus.uniform":function(){m.addClass(a.focusClass)},"blur.uniform":function(){m.removeClass(a.focusClass)}});b.uniform.noSelect(m);e(l)};c[h.SELECT]=function(l){var j=b(l);var m=b("<div />"),k=b("<span />");if(!j.css("display")=="none"&&a.autoHide){m.hide()}m.addClass(a.selectClass);if(a.useID&&l.attr("id")!=""){m.attr("id",a.idPrefix+"-"+l.attr("id"))}var n=l.find(":selected:first");if(n.length==0){n=l.find("option:first")}k.html(n.html());l.css("opacity",0);l.wrap(m);l.before(k);m=l.parent("div");k=l.siblings("span");l.bind({"change.uniform":function(){k.text(l.find(":selected").html());m.removeClass(a.activeClass)},"focus.uniform":function(){m.addClass(a.focusClass)},"blur.uniform":function(){m.removeClass(a.focusClass);m.removeClass(a.activeClass)},"mousedown.uniform touchbegin.uniform":function(){m.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){m.removeClass(a.activeClass)},"click.uniform touchend.uniform":function(){m.removeClass(a.activeClass)},"mouseenter.uniform":function(){m.addClass(a.hoverClass)},"mouseleave.uniform":function(){m.removeClass(a.hoverClass);m.removeClass(a.activeClass)},"keyup.uniform":function(){k.text(l.find(":selected").html())}});if(b(l).attr("disabled")){m.addClass(a.disabledClass)}b.uniform.noSelect(k);e(l)};c[h.CHECKBOX]=function(l){var j=b(l);var m=b("<div />"),k=b("<span />");if(!j.css("display")=="none"&&a.autoHide){m.hide()}m.addClass(a.checkboxClass);if(a.useID&&l.attr("id")!=""){m.attr("id",a.idPrefix+"-"+l.attr("id"))}b(l).wrap(m);b(l).wrap(k);k=l.parent();m=k.parent();b(l).css("opacity",0).bind({"focus.uniform":function(){m.addClass(a.focusClass)},"blur.uniform":function(){m.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){if(!b(l).attr("checked")){k.removeClass(a.checkedClass)}else{k.addClass(a.checkedClass)}},"mousedown.uniform touchbegin.uniform":function(){m.addClass(a.activeClass)},"mouseup.uniform touchend.uniform":function(){m.removeClass(a.activeClass)},"mouseenter.uniform":function(){m.addClass(a.hoverClass)},"mouseleave.uniform":function(){m.removeClass(a.hoverClass);m.removeClass(a.activeClass)}});if(b(l).attr("checked")){k.addClass(a.checkedClass)}if(b(l).attr("disabled")){m.addClass(a.disabledClass)}e(l)};c[h.RADIO]=function(l){var j=b(l);var m=b("<div />"),k=b("<span />");if(!j.css("display")=="none"&&a.autoHide){m.hide()}m.addClass(a.radioClass);if(a.useID&&l.attr("id")!=""){m.attr("id",a.idPrefix+"-"+l.attr("id"))}b(l).wrap(m);b(l).wrap(k);k=l.parent();m=k.parent();b(l).css("opacity",0).bind({"focus.uniform":function(){m.addClass(a.focusClass)},"blur.uniform":function(){m.removeClass(a.focusClass)},"click.uniform touchend.uniform":function(){if(!b(l).attr("checked")){k.removeClass(a.checkedClass)}else{var n=a.radioClass.split(" ")[0];b("."+n+" span."+a.checkedClass+":has([name='"+b(l).attr("name")+"'])").removeClass(a.checkedClass);k.addClass(a.checkedClass)}},"mousedown.uniform touchend.uniform":function(){if(!b(l).is(":disabled")){m.addClass(a.activeClass)}},"mouseup.uniform touchbegin.uniform":function(){m.removeClass(a.activeClass)},"mouseenter.uniform touchend.uniform":function(){m.addClass(a.hoverClass)},"mouseleave.uniform":function(){m.removeClass(a.hoverClass);m.removeClass(a.activeClass)}});if(b(l).attr("checked")){k.addClass(a.checkedClass)}if(b(l).attr("disabled")){m.addClass(a.disabledClass)}e(l)};c[h.FILE]=function g(l){var k=b(l);var n=b("<div />"),m=b("<span>"+a.fileDefaultText+"</span>"),o=b("<span>"+a.fileBtnText+"</span>");if(!k.css("display")=="none"&&a.autoHide){n.hide()}n.addClass(a.fileClass);m.addClass(a.filenameClass);o.addClass(a.fileBtnClass);if(a.useID&&k.attr("id")!=""){n.attr("id",a.idPrefix+"-"+k.attr("id"))}k.wrap(n);k.after(o);k.after(m);n=k.closest("div");m=k.siblings("."+a.filenameClass);o=k.siblings("."+a.fileBtnClass);if(!k.attr("size")){var j=n.width();k.attr("size",j/10)}var p=function(){var q=k.val()||a.fileDefaultText;if(q!==a.fileDefaultText){q=q.split(/[\/\\]+/).pop()}m.text(q)};p();k.css("opacity",0).bind({"focus.uniform":function(){n.addClass(a.focusClass)},"blur.uniform":function(){n.removeClass(a.focusClass)},"mousedown.uniform":function(){if(!b(l).is(":disabled")){n.addClass(a.activeClass)}},"mouseup.uniform":function(){n.removeClass(a.activeClass)},"mouseenter.uniform":function(){n.addClass(a.hoverClass)},"mouseleave.uniform":function(){n.removeClass(a.hoverClass);n.removeClass(a.activeClass)}});if(b.browser.msie){k.bind("click.uniform.ie7",function(){setTimeout(p,0)})}else{k.bind("change.uniform",p)}if(k.attr("disabled")){n.addClass(a.disabledClass)}b.uniform.noSelect(m);b.uniform.noSelect(o);e(l)};c[h.INPUT]=function(j){$el=b(j);$el.addClass($el.attr("type"));e(j)};c[h.TEXTAREA]=function(j){b(j).addClass("uniform");e(j)};function e(j){j=b(j).get();if(j.length>1){b.each(j,function(k,l){b.uniform.elements.push(l)})}else{b.uniform.elements.push(j)}}function f(j){var k=j.data("uniformType");if(!k){if(j.is("select")){if(j.attr("multiple")!=true){if(j.attr("size")==undefined||j.attr("size")<=1){k=h.SELECT}}}else{if(j.is(":checkbox")){k=h.CHECKBOX}else{if(j.is(":radio")){k=h.RADIO}else{if(j.is(":file")){k=h.FILE}else{if(j.is(":text, :password, input[type='email']")){k=h.INPUT}else{if(j.is("textarea")){k=h.TEXTAREA}else{if(j.is(":submit, :reset, button, a, input[type=button]")){k=h.BUTTON}}}}}}}j.data("uniformType",k)}return k}var i=(function(l){var k=function(m,n){if(m){m.removeClass(a.hoverClass+" "+a.focusClass+" "+a.activeClass);if(n.is(":disabled")){m.addClass(a.disabledClass)}else{m.removeClass(a.disabledClass)}}};var j={};j[h.BUTTON]=function(m){k(m.closest("div"),m)};j[h.SELECT]=function(n){var m=n.siblings("span");m.html(n.find(":selected").html());k(n.parent("div"),n)};j[h.CHECKBOX]=function(n){var m=n.closest("span");m.removeClass(a.checkedClass);if(n.is(":checked")){m.addClass(a.checkedClass)}k(n.closest("div"),n)};j[h.RADIO]=j[h.CHECKBOX];j[h.FILE]=function(n){var m=n.siblings(a.filenameClass);btnTag=n.siblings(a.fileBtnClass);m.text(n.val());k(n.parent("div"),n)};return function(n){var m=f(n);j[m]&&j[m](n)}})(b.uniform);b.uniform.noSelect=function(j){function k(){return false}b(j).each(function(){this.onselectstart=this.ondragstart=k;b(this).mousedown(k).css({MozUserSelect:"none"})})};b.uniform.restore=function(j){if(j===undefined){j=b.uniform.elements}b(j).each(function(){var k=b(this);var l=f(k);switch(l){case h.CHECKBOX:case h.RADIO:case h.BUTTON:k.unwrap().unwrap();break;case h.SELECT:case h.FILE:k.siblings("span").remove();k.unwrap();break;default:break}k.unbind(".uniform");k.css("opacity","1");var m=b.inArray(b(k),b.uniform.elements);b.uniform.elements.splice(m,1)})};b.uniform.update=function(j){if(!j){j=b.uniform.elements}b(j).each(function(){i(b(this))})};b.fn.uniform=function(k){a=b.extend(b.uniform.options,k);var j=this;if(a.resetSelector!=false){b(a.resetSelector).mouseup(function(){function l(){b.uniform.update(j)}setTimeout(l,10)})}return this.each(function(){if(b.support.selectOpacity){var l=b(this);if(l.data("uniformStatus")==d.APPLIED){return}var m=f(l);c[m]&&c[m](l);l.data("uniformStatus",d.APPLIED)}})}})(jQuery);